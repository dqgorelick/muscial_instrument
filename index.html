<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Musical Instrument Sandbox - Workshop</title>
    <link rel="stylesheet" href="css/base.css">
    <style>
        body {
            margin: 0;
            background-color: #000;
            min-height: 100vh;
            color: #eee;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 60px;
        }
        
        h1 {
            font-size: 3em;
            margin: 0 0 20px 0;
        }
        
        .tagline {
            font-size: 1.3em;
            opacity: 0.9;
        }
        
        .notice {
            background: rgba(76, 175, 80, 0.1);
            border: 2px solid rgba(76, 175, 80, 0.3);
            border-radius: 5px;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
        }
        
        .notice h2 {
            margin-top: 0;
            color: #4caf50;
        }
        
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .example-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            padding: 30px;
            transition: all 0.2s;
            text-decoration: none;
            color: #eee;
            display: block;
        }
        
        .example-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #4caf50;
        }
        
        .example-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
            opacity: 0.7;
        }
        
        .example-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .example-description {
            opacity: 0.9;
            line-height: 1.6;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.9em;
            margin-top: 10px;
            font-weight: 600;
        }
        
        .status-ready {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.5);
            color: #4caf50;
        }
        
        .status-coming {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.5);
        }
        
        .instructions-section {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            padding: 30px;
            margin: 40px 0;
        }
        
        .instructions-section h2 {
            margin-top: 0;
        }
        
        .instructions-section ul {
            line-height: 2;
        }
        
        .instructions-section li {
            margin: 10px 0;
        }
        
        .ip-footer {
            padding: 20px 30px;
            margin: 60px 0 20px 0;
            text-align: center;
        }
        
        .ip-footer p {
            margin: 0 0 15px 0;
            color: #ffffff;
        }
        
        .ip-address-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .ip-address {
            font-family: 'Courier New', monospace;
            font-size: 1.3em;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #4caf50;
            user-select: all;
        }
        
        .copy-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.2s;
        }
        
        .copy-btn:hover {
            background: #1976D2;
        }
        
        .copy-btn:active {
            background: #0D47A1;
        }
        
        .copy-btn.copied {
            background: #4caf50;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .tagline {
                font-size: 1.1em;
            }
            
            .examples-grid {
                grid-template-columns: 1fr;
            }
            
            .ip-address {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Musical Instruments on the Web</h1>
            <p class="tagline">Sandbox to create you own instrument</p>
        </header>
      
        
        <h2 style="margin: 40px 0 20px 0;">ðŸŽ¨ Your Projects</h2>
        
        <div class="examples-grid">
            <!-- Student Project Space -->
            <a href="projects/index.html" class="example-card" style="border: 2px solid #4caf50;">
                <div class="example-title">Start Your Project</div>
                <div class="example-description">
                    This is a copy of the example 1 project so you can get started to remix it in your own way.
                </div>
                <span class="status-badge status-ready">Go to page</span>
            </a>
        </div>
        
        <h2 style="margin: 40px 0 20px 0;">ðŸŽ¹ Examples</h2>
        
        <div class="examples-grid">
            <!-- Example 1 -->
            <a href="examples/01-play-a-beep/index.html" class="example-card">
                <div class="example-number">01</div>
                <div class="example-title">Play a Beep</div>
                <div class="example-description">
                    Learn how to make sounds using mouse clicks, keyboard, or MIDI devices. 
                    Includes visual feedback and multiple input methods.
                </div>
                <span class="status-badge status-ready">âœ… Ready</span>
            </a>
            
            <!-- Example 2 -->
            <a href="examples/02-theremin/index.html" class="example-card">
                <div class="example-number">02</div>
                <div class="example-title">Theremin</div>
                <div class="example-description">
                    Classic electronic instrument controlled by mouse or hand position.
                    Left hand = volume, Right hand = pitch.
                </div>
                <span class="status-badge status-ready">âœ… Ready</span>
            </a>
            
            <!-- Example 3 -->
            <a href="examples/03-polyphony/index.html" class="example-card">
                <div class="example-number">03</div>
                <div class="example-title">Polyphonic Synth</div>
                <div class="example-description">
                    Play multiple notes simultaneously with adjustable ADSR envelopes.
                    Hold keys or mouse to sustain notes.
                </div>
                <span class="status-badge status-ready">âœ… Ready</span>
            </a>
            
            <!-- Example 4 -->
            <a href="examples/04-step-sequencer/index.html" class="example-card">
                <div class="example-number">04</div>
                <div class="example-title">Step Sequencer</div>
                <div class="example-description">
                    16-step grid sequencer with scale selection (major, minor, chromatic).
                    Click cells to create patterns.
                </div>
                <span class="status-badge status-ready">âœ… Ready</span>
            </a>
            
            <!-- Example 5 -->
            <a href="examples/05-game-of-life-sequencer/index.html" class="example-card">
                <div class="example-number">05</div>
                <div class="example-title">Game of Life Sequencer</div>
                <div class="example-description">
                    Generative step sequencer using Conway's Game of Life. 
                    16 rows (2 octaves) evolve when playhead reaches the end.
                </div>
                <span class="status-badge status-ready">âœ… Ready</span>
            </a>
        </div>
        
        <div class="instructions-section">
            <h2>ðŸ’¡ Tips for Success</h2>
            <ul>
                <li>[written by AI</li>
                <li>All examples work best in <strong>modern browsers</strong> (Chrome, Firefox, Edge)</li>
                <li>Use <strong>headphones or speakers</strong> for the best audio experience</li>
                <li>Each example is <strong>self-contained</strong> - you can copy the entire file into an LLM chat</li>
                <li>Check the browser console (F12) for helpful debug messages</li>
                <li>Read the <code>README.md</code> file for detailed documentation</li>
            </ul>
        </div>
        
        <div class="instructions-section">
            <h2>ðŸ”§ Using with AI Tools (ChatGPT, Claude, etc.)</h2>
            <br>
            <p>[written by AI</p>
            <br>
            <p>Every file in this sandbox is designed to work well with AI assistants:</p>
            <ol>
                <li>Open any example file in your code editor</li>
                <li>Copy the entire file contents</li>
                <li>Paste into your AI chat</li>
                <li>Ask questions like: "How do I change the sound?", "Can you add a reverb effect?", etc.</li>
            </ol>
        </div>
        
        <h2 style="margin: 40px 0 20px 0;">ðŸŽ¨ Reference Projects</h2>
        
        <div class="examples-grid">
            <!-- MIDI 2 Reference -->
            <a href="references/midi2/index.html" class="example-card">
                <div class="example-title">Bezier Play</div>
                <div class="example-description">
                    Musical web experiment with bezier curve visualizations.
                    Play using computer keys or MIDI keyboard.
                </div>
                <span class="status-badge status-ready">ðŸŽ¨ Reference</span>
            </a>
            
            <!-- Binaural Tuner Reference -->
            <a href="references/binaural-tuner/index.html" class="example-card">
                <div class="example-title">Binaural Tuner</div>
                <div class="example-description">
                    Stereo audio output with four oscillators and state indicators.
                    Control frequency and volume with mouse position.
                </div>
                <span class="status-badge status-ready">ðŸŽ¨ Reference</span>
            </a>
        </div>
        
        <!-- Local IP Address Footer -->
        <div class="ip-footer">
            <p>Link to share (everyone on the same WiFi network can access it):</p>
            <div class="ip-address-container">
                <div class="ip-address" id="localIpAddress">Detecting local IP...</div>
                <button class="copy-btn" id="copyBtn" onclick="copyIpAddress()">Copy URL</button>
            </div>
        </div>
    </div>
    
    <script>
        // Detect local IP address
        async function getLocalIP() {
            try {
                // Create a dummy peer connection
                const pc = new RTCPeerConnection({
                    iceServers: []
                });
                
                // Create a dummy data channel
                pc.createDataChannel('');
                
                // Create and set local description
                const offer = await pc.createOffer();
                await pc.setLocalDescription(offer);
                
                // Parse the SDP to get local IP
                return new Promise((resolve) => {
                    pc.onicecandidate = (event) => {
                        if (event.candidate) {
                            const candidate = event.candidate.candidate;
                            const ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/;
                            const match = candidate.match(ipRegex);
                            
                            if (match && match[1]) {
                                const ip = match[1];
                                // Filter out localhost IPs
                                if (!ip.startsWith('127.')) {
                                    pc.close();
                                    resolve(ip);
                                }
                            }
                        }
                    };
                    
                    // Timeout after 3 seconds
                    setTimeout(() => {
                        pc.close();
                        resolve(null);
                    }, 3000);
                });
            } catch (error) {
                console.error('Error detecting IP:', error);
                return null;
            }
        }
        
        // Display the local IP with full URL
        async function displayLocalIP() {
            const ipElement = document.getElementById('localIpAddress');
            const localIP = await getLocalIP();
            
            if (localIP) {
                const port = window.location.port ? ':' + window.location.port : '';
                const url = `http://${localIP}${port}${window.location.pathname}`;
                ipElement.textContent = url;
            } else {
                // Fallback to showing hostname
                const port = window.location.port ? ':' + window.location.port : '';
                ipElement.textContent = `http://${window.location.hostname}${port}${window.location.pathname}`;
            }
        }
        
        // Copy IP address to clipboard
        function copyIpAddress() {
            const ipElement = document.getElementById('localIpAddress');
            const copyBtn = document.getElementById('copyBtn');
            
            // Copy to clipboard
            navigator.clipboard.writeText(ipElement.textContent).then(() => {
                // Visual feedback
                copyBtn.textContent = 'âœ“ Copied!';
                copyBtn.classList.add('copied');
                
                // Reset button after 2 seconds
                setTimeout(() => {
                    copyBtn.textContent = 'Copy URL';
                    copyBtn.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('Failed to copy. Please select and copy manually.');
            });
        }
        
        // Run on page load
        displayLocalIP();
    </script>
</body>
</html>

